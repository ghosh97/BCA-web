<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <title>Gallery - Durga Puja 2K25 Barcelona</title>
    <meta name="description" content="Photo Gallery of Durga Puja 2K25 Barcelona.">
    <meta name="author" content="Bengali Cultural Association Barcelona">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Gallery - Durga Puja 2K25 Barcelona">
    <meta property="og:description" content="View photos from previous Durga Puja celebrations in Barcelona">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bcaspain.github.io/gallery.html">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZHNQ37V3SX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-ZHNQ37V3SX');
    </script>

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="mobile-fixes.css" as="style">
    <link rel="preload" href="BCA-logo.webp" as="image">
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="mobile-fixes.css">
    
    <!-- Gallery-specific styles -->
    <style>
        /* Lightbox Modal */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: all 0.3s ease;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        /* Ensure lightbox is always on top */
        #lightbox {
            z-index: 999999 !important;
            pointer-events: auto !important;
        }
        
        /* Prevent body scrolling when lightbox is active */
        body.lightbox-open {
            overflow: hidden !important;
            position: fixed !important;
            width: 100% !important;
        }
        
        /* Reset any conflicting styles */
        #lightboxImg {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }

        /* Close Button */
        .close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1000000;
            transition: all 0.3s ease;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }

        .close:hover {
            color: #bbb;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        /* Navigation Buttons */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 15px;
            border-radius: 50%;
            transition: all 0.3s ease;
            z-index: 1000000;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        .prev-btn {
            left: 30px;
        }

        .next-btn {
            right: 30px;
        }

        /* Lightbox Content */
        .lightbox-content-wrapper {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .lightbox-content {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .lightbox-content:hover {
            transform: scale(1.02);
        }

        /* Image Counter */
        .image-counter {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 18px;
            font-weight: 600;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }
        
        /* Loading Indicator */
        .loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            z-index: 1000001;
        }
        
        .loading-indicator .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Gallery Items Enhancement */
        .gallery-item {
            transition: all 0.3s ease;
            overflow: hidden;
            border-radius: 10px;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .gallery-item img {
            transition: transform 0.3s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.05);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .close {
                top: 15px;
                right: 20px;
                font-size: 30px;
                width: 40px;
                height: 40px;
            }

            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
                padding: 12px;
            }

            .prev-btn {
                left: 15px;
            }

            .next-btn {
                right: 15px;
            }

            .lightbox-content {
                max-width: 95%;
                max-height: 70vh;
            }

            .image-counter {
                font-size: 16px;
                padding: 8px 16px;
                bottom: -35px;
            }
        }

        @media (max-width: 480px) {
            .close {
                top: 10px;
                right: 15px;
                font-size: 25px;
                width: 35px;
                height: 35px;
            }

            .nav-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
                padding: 10px;
            }

            .prev-btn {
                left: 10px;
            }

            .next-btn {
                right: 10px;
            }

            .lightbox-content {
                max-width: 98%;
                max-height: 60vh;
            }

            .image-counter {
                font-size: 14px;
                padding: 6px 12px;
                bottom: -30px;
            }
        }

        /* Loading Animation - Removed conflicting opacity */
        .lightbox-content {
            opacity: 1 !important;
            transition: transform 0.3s ease;
        }

        /* Smooth transitions */
        .lightbox * {
            transition: all 0.3s ease;
        }
        
        /* Fixed Footer Styles */
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .footer {
            margin-top: auto !important;
            position: relative;
            bottom: 0;
            width: 100%;
        }
        
        /* Ensure gallery section takes available space */
        .gallery-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .gallery-section .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 100%;
        }
        
        /* Mobile container adjustments */
        @media (max-width: 768px) {
            .gallery-section .container {
                padding: 0;
                margin: 0;
            }
        }
        
        .gallery-section section {
            flex: 1;
        }
        
        /* Gallery Grid Layout */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 2rem 0;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            justify-items: center;
        }
        
        /* Year Tabs Styling */
        .year-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0 3rem 0;
            flex-wrap: wrap;
        }
        
        .year-tab {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(225, 21, 41, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .year-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .year-tab:hover::before {
            left: 100%;
        }
        
        .year-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(225, 21, 41, 0.4);
        }
        
        .year-tab.active {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-color) 100%);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.4);
            transform: scale(1.05);
        }
        
        /* Year Sections */
        .year-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .year-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .year-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(225, 21, 41, 0.1) 0%, rgba(255, 193, 7, 0.1) 100%);
            border-radius: 20px;
            border: 1px solid rgba(225, 21, 41, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .year-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(225, 21, 41, 0.05) 50%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .year-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
            position: relative;
            z-index: 1;
        }
        
        .year-description {
            font-size: 1.2rem;
            color: #666;
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }
        
        /* Enhanced Gallery Items for Year Organization */
        .gallery-item[data-year] {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            aspect-ratio: 4/3;
            width: 100%;
            max-width: 400px;
            background: white;
            cursor: pointer; /* Always show pointer cursor */
        }
        
        .gallery-item[data-year]:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .gallery-item[data-year] img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none; /* Prevent image from interfering with click */
        }
        
        .gallery-item[data-year]:hover img {
            transform: scale(1.08);
        }
        
        /* Gallery overlay with single click indicator */
        .gallery-item[data-year] .gallery-overlay {
            background: linear-gradient(135deg, rgba(225, 21, 41, 0.9), rgba(255, 193, 7, 0.9));
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gallery-item[data-year]:hover .gallery-overlay {
            opacity: 1;
        }
        
        /* Single click indicator */
        .gallery-item[data-year]::before {
            content: 'üîç Click to zoom';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(225, 21, 41, 0.9);
            color: white;
            padding: 6px 10px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 5;
            pointer-events: none;
        }
        
        .gallery-item[data-year]:hover::before {
            opacity: 1;
        }
        
        /* Year-specific color themes */
        .year-section[id="year-2025"] .gallery-item[data-year="2025"] {
            border: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, var(--primary-color), var(--accent-color)) border-box;
        }
        
        .year-section[id="year-2024"] .gallery-item[data-year="2024"] {
            border: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, var(--secondary-color), var(--accent-color)) border-box;
        }
        
        .year-section[id="year-2023"] .gallery-item[data-year="2023"] {
            border: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, var(--accent-color), var(--primary-color)) border-box;
        }
        
        .year-section[id="year-2022"] .gallery-item[data-year="2022"] {
            border: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, var(--secondary-color), var(--primary-color)) border-box;
        }
        
        /* Year-specific overlay colors */
        .year-section[id="year-2025"] .gallery-item[data-year="2025"] .gallery-overlay {
            background: linear-gradient(135deg, rgba(225, 21, 41, 0.9), rgba(253, 126, 20, 0.9));
        }
        
        .year-section[id="year-2024"] .gallery-item[data-year="2024"] .gallery-overlay {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(253, 126, 20, 0.9));
        }
        
        .year-section[id="year-2023"] .gallery-item[data-year="2023"] .gallery-overlay {
            background: linear-gradient(135deg, rgba(253, 126, 20, 0.9), rgba(225, 21, 41, 0.9));
        }
        
        .year-section[id="year-2022"] .gallery-item[data-year="2022"] .gallery-overlay {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(225, 21, 41, 0.9));
        }
        
        /* Gallery Overlay Styling */
        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }
        
        /* Coming Soon Container Styling */
        .coming-soon-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .coming-soon-content {
            text-align: center;
            background: linear-gradient(135deg, rgba(225, 21, 41, 0.05) 0%, rgba(255, 193, 7, 0.05) 100%);
            border: 2px dashed rgba(225, 21, 41, 0.3);
            border-radius: 20px;
            padding: 3rem 2rem;
            width: 100%;
        }
        
        .coming-soon-content i {
            font-size: 4rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            opacity: 0.7;
        }
        
        .coming-soon-content h4 {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }
        
        .coming-soon-content p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .coming-soon-content .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(225, 21, 41, 0.3);
        }
        
        .coming-soon-content .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(225, 21, 41, 0.4);
        }
        
        .coming-soon-content .btn i {
            font-size: 1.1rem;
            margin: 0;
            color: white;
        }
        
        /* Mobile Responsive for Coming Soon */
        @media (max-width: 768px) {
            .coming-soon-container {
                min-height: 250px;
                padding: 1.5rem;
            }
            
            .coming-soon-content {
                padding: 2rem 1.5rem;
            }
            
            .coming-soon-content i {
                font-size: 3rem;
            }
            
            .coming-soon-content h4 {
                font-size: 1.5rem;
            }
            
            .coming-soon-content p {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .coming-soon-container {
                min-height: 200px;
                padding: 1rem;
            }
            
            .coming-soon-content {
                padding: 1.5rem 1rem;
            }
            
            .coming-soon-content i {
                font-size: 2.5rem;
            }
            
            .coming-soon-content h4 {
                font-size: 1.3rem;
            }
            
            .coming-soon-content .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }
        
        /* Mobile Responsive for Year Tabs */
        @media (max-width: 768px) {
            .year-tabs {
                gap: 0.8rem;
                margin: 1.5rem 0 2rem 0;
                padding: 0 1rem;
            }
            
            .year-tab {
                padding: 10px 20px;
                font-size: 1rem;
                border-radius: 20px;
            }
            
            .year-title {
                font-size: 2rem;
            }
            
            .year-description {
                font-size: 1.1rem;
                padding: 0 1rem;
            }
            
            .year-header {
                margin-bottom: 2rem;
                padding: 1.5rem 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .year-tabs {
                gap: 0.5rem;
                margin: 1rem 0 1.5rem 0;
            }
            
            .year-tab {
                padding: 8px 16px;
                font-size: 0.9rem;
                border-radius: 18px;
            }
            
            .year-title {
                font-size: 1.8rem;
            }
            
            .year-description {
                font-size: 1rem;
            }
            
            .year-header {
                margin-bottom: 1.5rem;
                padding: 1rem 0.5rem;
            }
        }
        
        /* Ultra-wide monitor optimization */
        @media (min-width: 1600px) {
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                max-width: 1600px;
                gap: 2rem;
                padding: 2.5rem 0;
            }
            
            .gallery-item[data-year] {
                max-width: 450px;
            }
        }
        
        /* Very wide monitor optimization */
        @media (min-width: 2000px) {
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                max-width: 1800px;
                gap: 2.5rem;
                padding: 3rem 0;
            }
            
            .gallery-item[data-year] {
                max-width: 500px;
            }
        }
        
        /* Responsive Grid */
        @media (max-width: 1200px) {
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 1.2rem;
                max-width: 1200px;
                padding: 1.5rem 0;
            }
        }
        
        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1rem;
                padding: 1rem 1rem;
                max-width: 100%;
                margin: 0 auto;
                justify-items: center;
            }
            
            .gallery-item[data-year] {
                aspect-ratio: 3/2;
                max-width: 100%;
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 0.8rem;
                max-width: 100%;
                margin: 0 auto;
                padding: 0.5rem 0.5rem;
                justify-items: center;
            }
            
            .gallery-item[data-year] {
                aspect-ratio: 1/1;
                max-width: 100%;
                width: 100%;
            }
        }
        
        /* Extra small screens */
        @media (max-width: 360px) {
            .gallery {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 0.5rem;
                margin: 0 auto;
                padding: 0.25rem 0.25rem;
                justify-items: center;
            }
            
            .gallery-item[data-year] {
                aspect-ratio: 1/1;
                width: 100%;
            }
        }
    </style>
    
    <!-- Favicon - Using existing logo as favicon -->
    <link rel="icon" type="image/webp" href="BCA-logo.webp">
</head>
<body class="scroll-container">
    <div class="main-content">
        <!-- Navigation Bar -->
        <nav class="navbar" id="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="index.html" style="text-decoration: none; color: inherit; display: inline-flex; align-items: center; gap: 10px;">
                        <span class="logo-img" style="display: inline-block;">
                            <img src="BCA-logo.webp" alt="BCA Spain Logo" style="width:50px;height:50px;border-radius:50%;object-fit:cover;vertical-align:middle;" />
                        </span>
                        <span class="logo-text" style="font-size: 1.3rem; font-weight: 600; display: inline-block; vertical-align:middle;">BCA Spain</span>
                    </a>
                </div>
                
                <div class="nav-menu" id="nav-menu">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="about.html" class="nav-link">About</a>
                    <a href="events.html" class="nav-link">Attractions</a>
                    <a href="schedule.html" class="nav-link">Schedule</a>
                    <a href="gallery.html" class="nav-link active">Gallery</a>
                    <a href="registration.html" class="nav-link">Registration</a>
                    <a href="contact.html" class="nav-link">Contact</a>
                </div>
                
                <div class="nav-toggle" id="nav-toggle">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>

    <!-- Gallery Section -->
    <section id="gallery" class="gallery-section" style="margin-top:80px;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Photo Gallery</h2>
                <p class="section-subtitle">Relive the magical moments from previous celebrations</p>
            </div>
            
                    <!-- Year Navigation Tabs -->
        <div class="year-tabs">
            <button class="year-tab" data-year="2025">2025</button>
            <button class="year-tab active" data-year="2024">2024</button>
            <button class="year-tab" data-year="2023">2023</button>
            <button class="year-tab" data-year="2022">2022</button>
        </div>
        
        <!-- 2025 Gallery Section -->
        <div class="year-section" id="year-2025">
                <div class="year-header">
                    <h3 class="year-title">2025 - Durga Puja Celebrations</h3>
                    <p class="year-description">Latest memories from this year's celebrations</p>
                </div>
                <div class="gallery">
                    <div class="coming-soon-container">
                        <div class="coming-soon-content">
                            <i class="fas fa-camera"></i>
                            <h4>Pictures Coming Soon!</h4>
                            <p>Be part of our 2025 celebrations and see your memories here!</p>
                            <a href="registration.html" class="btn btn-primary btn-large">
                                <i class="fas fa-ticket-alt"></i>
                                <span>Register Now</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
                    <!-- 2024 Gallery Section -->
        <div class="year-section active" id="year-2024">
                <div class="year-header">
                    <h3 class="year-title">2024 - Cultural Heritage</h3>
                    <p class="year-description">Memories from last year's celebrations</p>
                </div>
                <div class="gallery">
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p1.webp" alt="Durga Puja celebration with traditional decorations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p2.webp" alt="Cultural performance during Durga Puja" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p3.jpeg" alt="Community gathering at Durga Puja celebration" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p4.jpg" alt="Traditional rituals and ceremonies" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p5.jpg" alt="Durga Puja decorations and lighting" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p6.jpeg" alt="Cultural dance performance" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p7.jpg" alt="Traditional Bengali cuisine and food" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p7.0.jpg" alt="Special moments from celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p8.jpg" alt="Durga Puja pandal decorations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p9.jpg" alt="Community members in traditional attire" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p11.jpeg" alt="Musical performances during celebration" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p12.jpeg" alt="Durga Puja idol and offerings" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p13.jpeg" alt="Traditional art and craft displays" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p14.jpeg" alt="Cultural workshop activities" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p15.jpg" alt="Community bonding and celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p16.webp" alt="Traditional cultural performances" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p17.webp" alt="Durga Puja celebrations and rituals" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p18.webp" alt="Community gatherings and activities" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p19.webp" alt="Cultural heritage and traditions" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p20.webp" alt="Traditional Bengali culture celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p21.webp" alt="Durga Puja decorations and lighting" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p22.webp" alt="Community celebrations and joy" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p25.webp" alt="Traditional rituals and ceremonies" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p26.jpg" alt="Cultural activities and workshops" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p27.jpg" alt="Community spirit and togetherness" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p28.jpg" alt="Traditional Bengali cuisine and food" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p29.jpg" alt="Children and families in celebration" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p30.jpg" alt="Cultural performances and celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p31.jpg" alt="Traditional attire and cultural pride" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2024">
                        <img src="gallery/2024/p32.jpeg" alt="Community bonding and cultural heritage" />
                        <div class="gallery-overlay"></div>
                    </div>
                </div>
            </div>
            
                    <!-- 2023 Gallery Section -->
            <div class="year-section" id="year-2023">
                <div class="year-header">
                    <h3 class="year-title">2023 - Community Bonding</h3>
                    <p class="year-description">Special moments from community celebrations</p>
                </div>
                <div class="gallery">
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 1.jpg" alt="Community celebration and cultural activities" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 2.jpg" alt="Traditional performances and rituals" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 3.jpg" alt="Durga Puja celebrations and decorations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 4.jpg" alt="Community gathering and cultural heritage" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 5.jpg" alt="Traditional Bengali cuisine and food sharing" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 6.jpg" alt="Children participating in cultural activities" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 7.jpg" alt="Traditional attire and cultural performances" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 8.jpg" alt="Community bonding and celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 9.jpg" alt="Cultural workshops and activities" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 10.jpg" alt="Traditional music and dance performances" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 11.jpg" alt="Community members in celebration" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 12.jpg" alt="Cultural heritage and traditions" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 13.jpg" alt="Family gatherings and celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 14.jpg" alt="Traditional decorations and lighting" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 15.jpg" alt="Community spirit and togetherness" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 16.jpg" alt="Cultural performances and celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 17.jpg" alt="Traditional rituals and ceremonies" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 18.jpg" alt="Community celebrations and joy" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 19.jpg" alt="Cultural activities and workshops" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 20.jpg" alt="Traditional Bengali culture and heritage" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2023">
                        <img src="gallery/2023/File 21.jpg" alt="Community bonding and cultural pride" />
                        <div class="gallery-overlay"></div>
                    </div>
                </div>
            </div>
            
                    <!-- 2022 Gallery Section -->
        <div class="year-section" id="year-2022">
                <div class="year-header">
                    <h3 class="year-title">2022 - Foundation Years</h3>
                    <p class="year-description">Early memories from our community's journey</p>
                </div>
                <div class="gallery">
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-1.webp" alt="Foundation year celebration and community gathering" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-2.webp" alt="Cultural performances during founding celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-3.webp" alt="Traditional rituals and ceremonies from 2022" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-4.webp" alt="Community members in traditional attire" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-4.5.webp" alt="Special moments from foundation celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-5.webp" alt="Durga Puja decorations and lighting from 2022" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-6.webp" alt="Cultural activities and workshops" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-7.webp" alt="Traditional Bengali cuisine and food" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-8.webp" alt="Children and families participating in celebrations" />
                        <div class="gallery-overlay"></div>
                    </div>
                    <div class="gallery-item" data-year="2022">
                        <img src="gallery/2022/2022-9.webp" alt="Community bonding and cultural heritage" />
                        <div class="gallery-overlay"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Lightbox Modal with Slider -->
    <div id="lightbox" class="lightbox">
        <span id="closeBtn" class="close">&times;</span>
        <button id="prevBtn" class="nav-btn prev-btn" aria-label="Previous image">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </button>
        <button id="nextBtn" class="nav-btn next-btn" aria-label="Next image">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>
        <div class="lightbox-content-wrapper">
            <img id="lightboxImg" class="lightbox-content" alt="Lightbox Image">
            <div class="image-counter">
                <span id="currentImage">1</span> / <span id="totalImages">63</span>
            </div>
            <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <span>Loading image...</span>
            </div>
        </div>
    </div>
    </div> <!-- End main-content -->

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="BCA-logo.webp" alt="BCA Spain Logo">
                    <span>Bengali Cultural Association Barcelona</span>
                </div>
                <p>
                    &copy; 2025 Bengali Cultural Association Barcelona. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="back-to-top" onclick="scrollToTop()" aria-label="Back to top" title="Back to top">
        <i class="fas fa-arrow-up" aria-hidden="true"></i>
    </button>


    <!-- Smooth Scroll Polyfill -->
    <script>
        // Check if smoothscroll polyfill is needed
        if (!('scrollBehavior' in document.documentElement.style)) {
            // Load polyfill only if needed
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js';
            script.onload = function() {
      smoothscroll.polyfill();
            };
            document.head.appendChild(script);
        }
    </script>

    <!-- Scripts -->
    <script src="script.js"></script>
    
    <!-- Fallback for users with JavaScript disabled -->
    <noscript>
        <style>
            .loading { display: none !important; }
            .gallery-overlay { opacity: 1 !important; }
            .gallery-overlay span { display: none !important; }
    
        </style>
        <div style="background: #f8f9fa; padding: 20px; margin: 20px; border-radius: 10px; text-align: center;">
            <p><strong>JavaScript is disabled</strong></p>
            <p>Please enable JavaScript to use the interactive gallery features.</p>
        </div>
    </noscript>
    
    <script>
      // Gallery functionality with Year Navigation
      document.addEventListener('DOMContentLoaded', function() {
        // Get all elements
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const closeBtn = document.getElementById('closeBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const currentImageSpan = document.getElementById('currentImage');
        const totalImagesSpan = document.getElementById('totalImages');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const yearTabs = document.querySelectorAll('.year-tab');
        const yearSections = document.querySelectorAll('.year-section');

        // Variables
        let currentImageIndex = 0;
        let currentYear = '2024';
        let currentYearItems = [];

        // Initialize year navigation
        function initializeYearNavigation() {
          yearTabs.forEach(tab => {
            tab.addEventListener('click', function() {
              const year = this.getAttribute('data-year');
              switchYear(year);
            });
          });
        }

        // Switch between years
        function switchYear(year) {
          
          // Update active tab
          yearTabs.forEach(tab => {
            tab.classList.remove('active');
            if (tab.getAttribute('data-year') === year) {
              tab.classList.add('active');
            }
          });

          // Update active section
          yearSections.forEach(section => {
            section.classList.remove('active');
            if (section.id === 'year-' + year) {
              section.classList.add('active');
            }
          });

          currentYear = year;
          updateGalleryItems();
          
        }

        // Update gallery items for current year
        function updateGalleryItems() {
          
          // Use alternative selector approach
          const galleryItems = document.querySelectorAll('.gallery-item[data-year="' + currentYear + '"]');
          
          if (galleryItems.length > 0) {
            currentYearItems = Array.from(galleryItems);
            
            // Add click listeners to the new gallery items
            currentYearItems.forEach((item, index) => {
              item.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                openLightbox(index);
              });
              
              // Add visual feedback for click
              item.style.cursor = 'pointer';
            });
          } else {
            // This is a coming soon section (like 2025, 2023, 2022)
            currentYearItems = [];
          }
          
          // Reset lightbox if it's open
          if (lightbox.classList.contains('active')) {
            closeLightbox();
          }
        }

        // Initialize gallery items
        function initializeGalleryItems() {
          // Start with 2024 items since 2025 has no images yet
          const allItems = document.querySelectorAll('.gallery-item[data-year="2024"]');
          currentYearItems = Array.from(allItems);
          
          // Add click listeners to all gallery items
          currentYearItems.forEach((item, index) => {
            item.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              openLightbox(index);
            });
            
            // Add visual feedback for click
            item.style.cursor = 'pointer';
          });
        }

        // Function to open lightbox with specific image
        function openLightbox(index) {
          
          // Check if there are any gallery items for this year
          if (currentYearItems.length === 0) {
            return;
          }
          
          // Validate index
          if (index < 0 || index >= currentYearItems.length) {
            return;
          }
          
          currentImageIndex = index;
          const img = currentYearItems[index].querySelector('img');
          
          if (img) {
            
            // Show loading indicator
            loadingIndicator.style.display = 'flex';
            
            // Preload image to ensure smooth display
            const preloadImg = new Image();
            preloadImg.onload = function() {
              // Hide loading indicator
              loadingIndicator.style.display = 'none';
              
              // Ensure lightbox is properly reset first
              lightbox.style.display = 'flex';
              lightbox.style.pointerEvents = 'auto';
              lightbox.classList.add('active');
              document.body.classList.add('lightbox-open');
              document.body.style.overflow = 'hidden';
              
              // Set image properties
              lightboxImg.src = img.src;
              lightboxImg.alt = img.alt;
              lightboxImg.style.opacity = '1';
              lightboxImg.style.visibility = 'visible';
              currentImageSpan.textContent = index + 1;
              totalImagesSpan.textContent = currentYearItems.length;
              
              // Update navigation buttons state
              updateNavigationButtons();
              
              // Trap focus for accessibility
              trapFocus(lightbox);
              
            };
            
            preloadImg.onerror = function() {
              // Hide loading indicator
              loadingIndicator.style.display = 'none';
              // Silently fail in production - user can try again
            };
            
            preloadImg.src = img.src;
          }
        }

        // Function to close lightbox
        function closeLightbox() {
          lightbox.classList.remove('active');
          lightbox.style.display = 'none';
          document.body.style.overflow = '';
          
          // Reset image properties
          lightboxImg.style.opacity = '1';
          lightboxImg.style.visibility = 'visible';
          
          // Clear any event listeners that might be stuck
          lightbox.style.pointerEvents = 'auto';
          
          // Remove body class
          document.body.classList.remove('lightbox-open');
        }

        // Function to show previous image
        function showPreviousImage() {
          if (currentYearItems.length === 0) {
            return;
          }
          currentImageIndex = (currentImageIndex - 1 + currentYearItems.length) % currentYearItems.length;
          openLightbox(currentImageIndex);
        }

        // Function to show next image
        function showNextImage() {
          if (currentYearItems.length === 0) {
            return;
          }
          currentImageIndex = (currentImageIndex + 1) % currentYearItems.length;
          openLightbox(currentImageIndex);
        }

        // Function to update navigation buttons visibility
        function updateNavigationButtons() {
          if (!prevBtn || !nextBtn) {
            return;
          }
          
          if (currentYearItems.length === 0) {
            // Hide navigation buttons for coming soon sections
            prevBtn.style.display = 'none';
            nextBtn.style.display = 'none';
          } else {
            // Show navigation buttons for sections with images
            prevBtn.style.display = 'block';
            nextBtn.style.display = 'block';
          }
        }



        // Touch/swipe support for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        lightbox.addEventListener('touchstart', function(e) {
          touchStartX = e.changedTouches[0].screenX;
        });

        lightbox.addEventListener('touchend', function(e) {
          touchEndX = e.changedTouches[0].screenX;
          handleSwipe();
        });

        function handleSwipe() {
          const swipeThreshold = 50;
          const diff = touchStartX - touchEndX;
          
          if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0) {
              // Swipe left - next image
              showNextImage();
            } else {
              // Swipe right - previous image
              showPreviousImage();
            }
          }
        }

        // Initialize lightbox event listeners
        function initializeLightboxEventListeners() {
          
          // Close button
          if (closeBtn) {
            closeBtn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              closeLightbox();
            });
          }
          
          // Previous button
          if (prevBtn) {
            prevBtn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              showPreviousImage();
            });
          }
          
          // Next button
          if (nextBtn) {
            nextBtn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              showNextImage();
            });
          }
          
          // Lightbox background click to close
          if (lightbox) {
            lightbox.addEventListener('click', function(e) {
              if (e.target === lightbox) {
                closeLightbox();
              }
            });
          }
          
          // Keyboard navigation
          document.addEventListener('keydown', function(e) {
            if (lightbox.classList.contains('active')) {
              switch(e.key) {
                case 'Escape':
                  closeLightbox();
                  break;
                case 'ArrowLeft':
                  showPreviousImage();
                  break;
                case 'ArrowRight':
                  showNextImage();
                  break;
              }
            }
          });
          
        }

        // Initialize everything
        function initializeGallery() {
          
          // Check if all required elements exist
          if (!lightbox || !lightboxImg || !loadingIndicator || !currentImageSpan || !totalImagesSpan) {
            return;
          }
          
          // Initialize year navigation
          initializeYearNavigation();
          
          // Initialize gallery items
          initializeGalleryItems();
          
          // Initialize lightbox event listeners
          initializeLightboxEventListeners();
          
        }

        // Start initialization
        initializeGallery();
        
        // Performance optimization: Debounce resize handler
        let resizeTimeout;
        window.addEventListener('resize', function() {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(function() {
            if (lightbox.classList.contains('active')) {
              // Reset lightbox position and properties
              lightbox.style.display = 'flex';
              lightbox.style.pointerEvents = 'auto';
            }
          }, 250);
        });

        // Cleanup function for memory management
        function cleanupGallery() {
          // Remove event listeners
          if (resizeTimeout) {
            clearTimeout(resizeTimeout);
          }
          
          // Close lightbox if open
          if (lightbox.classList.contains('active')) {
            closeLightbox();
          }
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', cleanupGallery);

        // Accessibility: Focus management for lightbox
        function trapFocus(element) {
          const focusableElements = element.querySelectorAll(
            'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
          );
          const firstFocusable = focusableElements[0];
          const lastFocusable = focusableElements[focusableElements.length - 1];

          if (firstFocusable) {
            firstFocusable.focus();
          }

          element.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
              if (e.shiftKey) {
                if (document.activeElement === firstFocusable) {
                  e.preventDefault();
                  lastFocusable.focus();
                }
              } else {
                if (document.activeElement === lastFocusable) {
                  e.preventDefault();
                  firstFocusable.focus();
                }
              }
            }
          });
        }
      });
    </script>
</body>
</html>
